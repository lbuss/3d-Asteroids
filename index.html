<html>
<header>
  <script src="three.min.js"></script>
  <script src="keymaster.js"></script>
  <script src="utils.js"></script>
  <script src="orbit_controls.js"></script>
  <script src="html_changer.js"></script>
  <script src="fps_controls.js"></script>
  <script src="moving_object.js"></script>
  <script src="asteroid.js"></script>
  <script src="sun.js"></script>
  <script src="explosion.js"></script>
  <script src="bullet.js"></script>
  <script src="ship.js"></script>
  <script src="game.js"></script>
  <script src="jquery-1.11.1.js"></script>
  <link rel="stylesheet" href="style_sheet.css" type="text/css" media="screen" title="no title" charset="utf-8">
  
  <!--vertex shader-->
  <script id="vertexShader" type="x-shader/x-vertex">
    uniform vec3 viewVector;
    uniform float c;
    uniform float p;
    varying float intensity;
    uniform float amplitude;
    attribute float displacement;
    void main() 
    { 
      //normalize vectors with normal matrix as they may be scaled funny
      vec3 vNormal = normalize( normalMatrix * normal );
      vec3 vNormel = normalize( normalMatrix * viewVector );

      // (c - vector lengths * cos(angle between vectors))^p
      // lengths are 1 since we normalized
      // values set in sun.js where the glow object is defined; c=.2 p=3
      intensity = pow( c - dot(vNormal, vNormel), p );

      //no modifying displacement of glow currently
      // vec3 newPosition = position + normal * vec3(displacement * amplitude);
      // vec3 newPosition = position + normal * vec3(displacement)
      // gl_Position = projectionMatrix * modelViewMatrix *vec4( newPosition, 1.0);
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }
  </script>

    <!-- fragment shader-->
  <script id="fragmentShader" type="x-shader/x-vertex"> 
    uniform vec3 glowColor;
    varying float intensity;
    void main() 
    {
      vec3 glow = glowColor * intensity;
        gl_FragColor = vec4( glow, 1.0 );
    }
  </script>
</header>

<body>
  <div id="container">
    <!-- <div class='FAQ'>
      <a href="#hide1" class="hide" id="hide1">+</a>
      <a href="#show1" class="show" id="show1">-</a>
      <div class="question"> 
          Question Question Question Question Question Question Question Question Question Question Question? 
      </div>
      <div class="list">
            <p>Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer Answer </p>
      </div>
    </div> -->

    <div id="spaceView">
      <div id="links">
        <div id="linksWrap" class="infoWrap">
          <a href="#hide1" class="hide clean" id="hide1"><h3 class="title">Destinations +</h3></a>
          <a href="#show1" class="show clean" id="show1"><h3 class="title">Destinations -</h3></a>

          <div id="linkList" class="list">
          </div>
        </div>
      </div>

      <div class="controls">
        <div id="controlsWrap" class="infoWrap">
          <a href="#hide2" class="hide clean" id="hide2"><h3 class="title">Controls +</h3></a>
          <a href="#show2" class="show clean" id="show2"><h3 class="title">Controls -</h3></a>


          <div class="list">
            <p>
              &bull; Scroll in and out with mousewheel<br><br>
              &bull; Click and drag to rotate the view<br><br>
              &bull; Press 'f' to toggle ship view and 3rd person<br><br>
              &bull; Arrows and space move the ship and shoot<br><br>
              &bull; Click on asteroids in third person<br><br>
              &bull; 'a' spawns more asteroids!<br><br>
            </p>
          </div>
        </div>
      </div>

    </div>
        
      <!-- <div id="about">
        <div id="aboutWrap" class="infoWrap">
          <p>
            I am a rails/javascript developer looking for work in the Bay Area. Contact me at LawSBuss@gmail.com or check out my github at <a href="https://github.com/lbuss" target="_blank">github.com/lbuss</a>
          </p>
        </div>
      </div>
    </div> -->


    <div id="hud">
      <div id="count">
        <div id="countWrap" class="infoWrap">
        </div>
      </div>

      <div class="controls">
        <div id="shipSontrolsWrap" class="infoWrap">
          <a href="#hide3" class="hide clean" id="hide3"><h3 class="title">Ship Controls +</h3></a>
          <a href="#show3" class="show clean" id="show3"><h3 class="title">Ship Controls -</h3></a>
          <div class="list">
            <p>
              &bull; Press 'f' to leave Ship View<br><br>
              &bull; Arrows and space move the ship and shoot<br><br>
              &bull; 'a' spawns more asteroids!<br><br>
            </p>
          </div>
        </div>
      </div>
    </div>

    
  <script>
    var g = new Asteroids.Game();
    g.start();
  </script>
</body>

</html>